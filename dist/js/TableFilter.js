sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/util/uid"],function(e,t,r,l){"use strict";return{updateColumnMenu:function(e,t){var r=this;var o=t;var a=o.byId(e);a.getColumns().forEach(t=>{t.attachColumnMenuOpen(function(s){var i=t.getMenu();var n=new sap.ui.unified.MenuItem({id:t.sId+"-menu-custom-fltr-"+l(),icon:"sap-icon://filter",text:"Filter",select:function(t){r.onColFilter(e,t.getSource().oParent.oParent.getAggregation("label").getProperty("text"),o,true)}});var g=new sap.ui.unified.MenuItem({id:t.sId+"-menu-clear-fltr-"+l(),icon:"sap-icon://clear-filter",text:"Clear Filter",enabled:r.isFiltered(e,t.getProperty("name"),"COL",o),select:function(t){r.onColFilter(e,t.getSource().oParent.oParent.getAggregation("label").getProperty("text"),o,false);r.onRemoveColFilter(t,o);r.onColFilterConfirm(t,o)}});var d=new sap.ui.unified.MenuItem({id:t.sId+"-menu-clear-all-fltr-"+l(),icon:"sap-icon://clear-filter",text:"Clear All Filters",enabled:r.isFiltered(e,t.getProperty("name"),"ALL",o),select:function(e){r.onColFilterClear(e,o)}});var u=new sap.ui.unified.MenuItem({id:t.sId+"-menu-clear-sorting-"+l(),icon:"sap-icon://decline",text:"Clear Sorting",enabled:r.isSorted(e,t.getProperty("name"),o),select:function(e){a.getBinding().sort(null);a.getBinding().sort([]);a.getColumns().forEach(e=>{if(e.getSorted()){e.setSorted(false)}})}});setTimeout(()=>{var l=false;var a=-1;i.getItems().forEach((s,n)=>{if(s.sId.indexOf("filter")>=0){i.removeItem(s)}if(s.sId.indexOf("desc")>=0){a=n}if(s.mProperties.text!==undefined&&s.mProperties.text==="Filter"){l=true}if(s.sId.indexOf("clear-all-fltr")>=0){s.setProperty("enabled",r.isFiltered(e,t.getAggregation("template").getBindingInfo("text").parts[0].path,"ALL",o))}else if(s.sId.indexOf("clear-fltr")>=0){s.setProperty("enabled",r.isFiltered(e,t.getAggregation("template").getBindingInfo("text").parts[0].path,"COL",o))}else if(s.sId.indexOf("clear-sorting")>=0){s.setProperty("enabled",r.isSorted(e,t.getAggregation("template").getBindingInfo("text").parts[0].path,o))}});if(!l){var s=0;if(u!==-1){s++;i.insertItem(u,a+s)}s++;i.insertItem(n,a+s);s++;i.insertItem(g,a+s);s++;i.insertItem(d,a+s)}i.setPageSize(i.getItems().length)},10)})})},onColFilter:function(t,r,l,o){var a=l;var s="";if(typeof t==="string"){s=t}else{s=t.getSource().data("TableName")}var i="zuimatmaster.view.fragments.dialog.GenericFilterDialog";if(!a._GenericFilterDialog){a._GenericFilterDialog=sap.ui.xmlfragment(i,a);a._GenericFilterDialog.setModel(new e);a.getView().addDependent(a._GenericFilterDialog)}var n=a.byId(s);var g=a._GenericFilterDialog;var d=g.getModel().getProperty("/items");var u=g.getModel().getProperty("/values");var m=g.getModel().getProperty("/custom");var f=r===undefined?g.getModel().getProperty("/selectedItem"):r;var p=g.getModel().getProperty("/selectedColumn");var c={};var C=[];var y={};var P=false;var I="VLF";var M=[];var F=jQuery.extend(true,[],a._aColumns[s.replace("Tab","")]);F.forEach((e,t)=>{if(!(e.ColumnName==="MANDT"||e.ColumnName==="DOCTYPE"||e.ColumnName==="SHORTTEXT"||e.ColumnName==="INFORECORD"||e.ColumnName==="COMPANY"||e.ColumnName==="PLANMONTH")){M.push(e)}});if(n.getModel()!==undefined){C=jQuery.extend(true,[],n.getModel().getData().rows)}if(a._colFilters[s]!==undefined){d=a._colFilters[s].items;u=a._colFilters[s].values;m=a._colFilters[s].custom;f=a._colFilters[s].selectedItem;p=a._colFilters[s].selectedColumn}else{d=undefined;u=undefined;m=undefined;f="";p=""}if(r!==undefined){f=r}if(m===undefined){m={}}if(d!==undefined){if(d.filter(e=>e.isFiltered===true).length>0){P=true}}if(!P){g.getModel().setProperty("/btnRemoveFilterEnable",false)}else{g.getModel().setProperty("/btnRemoveFilterEnable",true)}M.forEach((e,t)=>{if(e.ColumnName==="CREATEDDT"||e.ColumnName==="UPDATEDDT"){e.DataType="DATETIME"}y[e.ColumnName]=[];C.forEach(t=>{if(t[e.ColumnName]===""||t[e.ColumnName]===null||t[e.ColumnName]===undefined){t[e.ColumnName]="(blank)"}else if(t[e.ColumnName]===true){t[e.ColumnName]="Yes"}else if(t[e.ColumnName]===false){t[e.ColumnName]="No"}if(y[e.ColumnName].findIndex(r=>r.Value===t[e.ColumnName])<0){if(P&&u&&u[e.ColumnName].findIndex(r=>r.Value===t[e.ColumnName])>=0){u[e.ColumnName].forEach(r=>{if(r.Value===t[e.ColumnName]){y[e.ColumnName].push({Value:r.Value,Selected:r.Selected})}})}else{y[e.ColumnName].push({Value:t[e.ColumnName],Selected:true})}}});y[e.ColumnName].sort((t,r)=>(e.DataType==="NUMBER"?+t.Value:e.DataType==="DATETIME"?t.Value==="(blank)"?"":new Date(t.Value):t.Value)>(e.DataType==="NUMBER"?+r.Value:e.DataType==="DATETIME"?r.Value==="(blank)"?"":new Date(r.Value):r.Value)?1:-1);e.selected=false;if(!P){if(r===undefined){if(t===0){p=e.ColumnName;f=e.ColumnLabel;e.selected=true}}else{if(f===e.ColumnLabel){p=e.ColumnName;e.selected=true}}m[e.ColumnName]={Operator:e.DataType==="STRING"?"Contains":"EQ",ValFr:"",ValTo:""};e.filterType="VLF";e.isFiltered=false}else if(P){d.filter(t=>t.ColumnName===e.ColumnName).forEach(t=>{e.filterType=t.filterType;e.isFiltered=t.isFiltered});if(f===e.ColumnLabel){p=e.ColumnName;I=e.filterType;e.selected=true;if(e.isFiltered){g.getModel().setProperty("/btnRemoveFilterEnable",true)}else{g.getModel().setProperty("/btnRemoveFilterEnable",false)}}}e.filterOperator=e.DataType==="STRING"?"Contains":"EQ";c[e.ColumnName]=""});g.getModel().setProperty("/sourceTabId",s);g.getModel().setProperty("/selectedItem",f);g.getModel().setProperty("/selectedColumn",p);g.getModel().setProperty("/reset",false);g.getModel().setProperty("/items",M);g.getModel().setProperty("/values",y);g.getModel().setProperty("/currValues",jQuery.extend(true,[],y[p]));g.getModel().setProperty("/rowCount",y[p].length);g.getModel().setProperty("/search",c);g.getModel().setProperty("/custom",m);g.getModel().setProperty("/customColFilterOperator",m[p].Operator);g.getModel().setProperty("/customColFilterFrVal",m[p].ValFr);g.getModel().setProperty("/customColFilterToVal",m[p].ValTo);g.getModel().setProperty("/searchValue","");if(o){g.open()}var v=false;var b=-1,V=-1;var D=g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[1].getItems()[0];D.clearSelection();y[p].forEach((e,t)=>{if(e.Selected){if(b===-1)b=t;V=t}if(!e.Selected||t===y[p].length-1){if(b!==-1){if(!v){D.setSelectionInterval(b,V)}else{D.addSelectionInterval(b,V)}v=true;g.getModel().setProperty("/reset",false)}b=-1;V=-1}});g.getModel().setProperty("/reset",true);var h;g.getAggregation("buttons").forEach(e=>{e.getAggregation("customData").forEach(t=>{if(t.getProperty("value")==="Clear"){h=e}})});if(P){h.setEnabled(true)}else{h.setEnabled(false)}g.getContent()[0].getMasterPages()[0].getContent()[0].getItems().forEach(e=>{if(M.filter(t=>t.ColumnLabel===e.getTitle())[0].isFiltered){e.setIcon("sap-icon://filter")}else{e.setIcon("sap-icon://text-align-justified")}});if(I==="UDF"){g.getModel().setProperty("/selectUDF",true);g.getModel().setProperty("/panelVLFVisible",false);g.getModel().setProperty("/panelUDFVisible",true)}else{g.getModel().setProperty("/selectVLF",true);g.getModel().setProperty("/panelVLFVisible",true);g.getModel().setProperty("/panelUDFVisible",false)}var T=M.filter(e=>e.ColumnName===p)[0].DataType;if(T==="BOOLEAN"){g.getModel().setProperty("/rbtnUDFVisible",false);g.getModel().setProperty("/lblUDFVisible",false)}else{g.getModel().setProperty("/rbtnUDFVisible",true);g.getModel().setProperty("/lblUDFVisible",true)}if(T==="NUMBER"){g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[1].setType("Number");g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[1].getItems()[1].setType("Number")}else{g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[1].setType("Text");g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[1].getItems()[1].setType("Text")}if(m[p].Operator==="BT"){g.getModel().setProperty("/panelUDFToVisible",true)}else{g.getModel().setProperty("/panelUDFToVisible",false)}if(T==="DATETIME"){g.getModel().setProperty("/customColFilterFrValVisible",false);g.getModel().setProperty("/customColFilterToValVisible",false);g.getModel().setProperty("/customColFilterFrDateVisible",true);g.getModel().setProperty("/customColFilterToDateVisible",true)}else{g.getModel().setProperty("/customColFilterFrValVisible",true);g.getModel().setProperty("/customColFilterToValVisible",true);g.getModel().setProperty("/customColFilterFrDateVisible",false);g.getModel().setProperty("/customColFilterToDateVisible",false)}if(T!=="STRING"){if(g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].getItems().filter(e=>e.getKey()==="Contains").length>0){g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].removeItem(3);g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].removeItem(2)}}else{if(g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].getItems().filter(e=>e.getKey()==="Contains").length===0){g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].insertItem(new sap.ui.core.Item({key:"Contains",text:"Contains"}),2);g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].insertItem(new sap.ui.core.Item({key:"NotContains",text:"Not Contains"}),3)}}var E={onclick:function(e){if(e.srcControl.data("FilterType")==="UDF"){g.getModel().setProperty("/panelVLFVisible",false);g.getModel().setProperty("/panelUDFVisible",true)}else{g.getModel().setProperty("/panelVLFVisible",true);g.getModel().setProperty("/panelUDFVisible",false)}}};g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[0].getItems()[0].getContent()[3].addEventDelegate(E);g.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[0].getItems()[0].getContent()[6].addEventDelegate(E);a._GenericFilterDialogModel=jQuery.extend(true,[],g.getModel());a._colFilters[s]=jQuery.extend(true,{},g.getModel().getData())},onColFilterClear:function(e,t){var r=t;var l=r._GenericFilterDialog;var o=l.getModel().getProperty("/items");var a=l.getModel().getProperty("/values");var s=l.getModel().getData().sourceTabId;l.close();var i="";o.forEach(e=>{a[e.ColumnName].forEach(e=>e.Selected=true);e.isFiltered=false});r.byId(s).getBinding("rows").filter(i,"Application");l.getContent()[0].getMasterPages()[0].getContent()[0].getItems().forEach(e=>e.setIcon("sap-icon://text-align-justified"));r.byId(s).getColumns().forEach(e=>{e.setProperty("filtered",false)});r._colFilters[s]=jQuery.extend(true,{},l.getModel().getData());r.setActiveRowHighlight(s);if(s==="headerTab"){var n=r.byId(s).getModel().getData().rows.filter((e,t)=>t===0)[0].COSTCOMPCD;if(r.getView().getModel("ui").getProperty("/activeComp")!==n){r.byId(s).getModel().getData().rows.forEach(e=>{if(e.COSTCOMPCD===n){e.ACTIVE="X"}else{e.ACTIVE=""}});r.getView().getModel("ui").setProperty("/activeComp",n);r.getView().getModel("ui").setProperty("/activeCompDisplay",n);r.getDetailData(false)}r.getView().getModel("counts").setProperty("/header",r.byId(s).getBinding("rows").aIndices.length)}else if(s==="detailTab"){r.getView().getModel("counts").setProperty("/detail",r.byId(s).getBinding("rows").aIndices.length)}},onColFilterCancel:function(e,t){var r=t;var l=r._GenericFilterDialogModel;var o=r._GenericFilterDialog;o.getModel().setProperty("/items",l.getData().items);o.getModel().setProperty("/values",l.getData().values);o.getModel().setProperty("/currValues",l.getData().currValues);o.getModel().setProperty("/search",l.getData().search);o.getModel().setProperty("/custom",l.getData().custom);o.getContent()[0].getMasterPages()[0].getContent()[0].getItems().forEach(e=>{var t=l.getData().items.filter(t=>t.ColumnLabel===e.getTitle())[0].isFiltered;if(t){e.setIcon("sap-icon://filter")}else{e.setIcon("sap-icon://text-align-justified")}});r._GenericFilterDialog.close()},onColFilterConfirm:function(r,l){var o=l;var a=o._GenericFilterDialog;var s=a.getModel().getProperty("/items");var i=a.getModel().getProperty("/values");var n=a.getModel().getProperty("/custom");var g=a.getModel().getData().sourceTabId;a.close();var d=[];var u=null;var m=o.byId(g).getColumns();s.forEach(e=>{var r=m.filter(t=>t.getAggregation("label").getProperty("text")===e.ColumnLabel)[0];var l=[];var o=null;if(e.filterType==="VLF"&&i[e.ColumnName].filter(e=>e.Selected===false).length>0){i[e.ColumnName].forEach(r=>{if(r.Selected){if(r.Value==="(blank)"){l.push(new t(e.ColumnName,this.getConnector("EQ"),""));l.push(new t(e.ColumnName,this.getConnector("EQ"),null));l.push(new t(e.ColumnName,this.getConnector("EQ"),undefined))}else if(e.DataType==="BOOLEAN"){if(r.Value==="Yes"){l.push(new t(e.ColumnName,this.getConnector("EQ"),true))}else{l.push(new t(e.ColumnName,this.getConnector("EQ"),false))}}else{l.push(new t(e.ColumnName,this.getConnector("EQ"),r.Value))}}});o=new t(l,false);d.push(new t(o));r.setProperty("filtered",true);e.isFiltered=true}else if(e.filterType==="UDF"&&n[e.ColumnName].ValFr!==""){if(n[e.ColumnName].ValTo!==""){d.push(new t(e.ColumnName,this.getConnector("BT"),n[e.ColumnName].ValFr,n[e.ColumnName].ValTo))}else{d.push(new t(e.ColumnName,this.getConnector(n[e.ColumnName].Operator),n[e.ColumnName].ValFr))}r.setProperty("filtered",true);e.isFiltered=true}else{r.setProperty("filtered",false);e.isFiltered=false}});if(d.length>0){u=new t(d,true)}else{u=""}o.byId(g).getBinding("rows").filter(u,"Application");o._colFilters[g]=jQuery.extend(true,{},a.getModel().getData());if(u!==""){if(g==="headerTab"){if(o.byId(g).getBinding("rows").aIndices.length===0){o.getView().getModel("ui").setProperty("/activeComp","");o.getView().getModel("ui").setProperty("/activeCompDisplay","");o.getView().getModel("counts").setProperty("/header",0);o.getView().getModel("counts").setProperty("/detail",0);o.byId("detailTab").setModel(new e({rows:[]}))}else{var f=o.byId(g).getModel().getData().rows.filter((e,t)=>t===o.byId(g).getBinding("rows").aIndices[0])[0].COSTCOMPCD;if(o.getView().getModel("ui").getProperty("/activeComp")!==f){o.byId(g).getModel().getData().rows.forEach(e=>{if(e.COSTCOMPCD===f){e.ACTIVE="X"}else{e.ACTIVE=""}});o.setActiveRowHighlight(g);o.getView().getModel("ui").setProperty("/activeComp",f);o.getView().getModel("ui").setProperty("/activeCompDisplay",f);o.getDetailData(false)}o.getView().getModel("counts").setProperty("/header",o.byId(g).getBinding("rows").aIndices.length)}}else if(g==="detailTab"){if(o.byId(g).getBinding("rows").aIndices.length===0){o.getView().getModel("counts").setProperty("/detail",0)}else{o.getView().getModel("counts").setProperty("/detail",o.byId(g).getBinding("rows").aIndices.length);o.setActiveRowHighlight(g)}}}else{o.getView().getModel("counts").setProperty("/header",o.byId(g).getModel().getData().rows.length)}},onFilterItemPress:function(e,t){var r=t;var l=r._GenericFilterDialog;var o=l.getModel().getProperty("/items");var a=l.getModel().getProperty("/values");var s=l.getModel().getProperty("/custom");var i=e.getSource().getSelectedItem().getProperty("title");var n="";o.forEach(e=>{if(e.ColumnLabel===i){n=e.ColumnName;if(e.isFiltered){l.getModel().setProperty("/btnRemoveFilterEnable",true)}else{l.getModel().setProperty("/btnRemoveFilterEnable",false)}}});l.getModel().setProperty("/currValues",jQuery.extend(true,[],a[n]));l.getModel().setProperty("/rowCount",a[n].length);l.getModel().setProperty("/selectedItem",i);l.getModel().setProperty("/selectedColumn",n);l.getModel().setProperty("/reset",false);l.getModel().setProperty("/customColFilterOperator",s[n].Operator);l.getModel().setProperty("/customColFilterFrVal",s[n].ValFr);l.getModel().setProperty("/customColFilterToVal",s[n].ValTo);l.getModel().setProperty("/searchValue","");var g=false;var d=-1,u=-1;var m=l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[1].getItems()[0];m.clearSelection();a[n].forEach((e,t)=>{if(e.Selected){if(d===-1)d=t;u=t}if(!e.Selected||t===a[n].length-1){if(d!==-1){if(!g){m.setSelectionInterval(d,u)}else{m.addSelectionInterval(d,u)}g=true;l.getModel().setProperty("/reset",false)}d=-1;u=-1}});var f=o.filter(e=>e.ColumnName===n)[0].filterType;var p=o.filter(e=>e.ColumnName===n)[0].DataType;if(f==="UDF"){l.getModel().setProperty("/selectVLF",false);l.getModel().setProperty("/selectUDF",true);l.getModel().setProperty("/panelVLFVisible",false);l.getModel().setProperty("/panelUDFVisible",true)}else{l.getModel().setProperty("/selectUDF",false);l.getModel().setProperty("/selectVLF",true);l.getModel().setProperty("/panelVLFVisible",true);l.getModel().setProperty("/panelUDFVisible",false)}if(l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].getSelectedKey()==="BT"){l.getModel().setProperty("/panelUDFToVisible",true)}else{l.getModel().setProperty("/panelUDFToVisible",false)}if(p==="BOOLEAN"){l.getModel().setProperty("/rbtnUDFVisible",false);l.getModel().setProperty("/lblUDFVisible",false)}else{l.getModel().setProperty("/rbtnUDFVisible",true);l.getModel().setProperty("/lblUDFVisible",true)}if(p==="NUMBER"){l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[1].setType("Number");l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[1].getItems()[1].setType("Number")}else{l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[1].setType("Text");l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[1].getItems()[1].setType("Text")}if(p==="DATETIME"){l.getModel().setProperty("/customColFilterFrValVisible",false);l.getModel().setProperty("/customColFilterToValVisible",false);l.getModel().setProperty("/customColFilterFrDateVisible",true);l.getModel().setProperty("/customColFilterToDateVisible",true)}else{l.getModel().setProperty("/customColFilterFrValVisible",true);l.getModel().setProperty("/customColFilterToValVisible",true);l.getModel().setProperty("/customColFilterFrDateVisible",false);l.getModel().setProperty("/customColFilterToDateVisible",false)}if(p!=="STRING"){if(l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].getItems().filter(e=>e.getKey()==="Contains").length>0){l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].removeItem(3);l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].removeItem(2)}}else{if(l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].getItems().filter(e=>e.getKey()==="Contains").length===0){l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].insertItem(new sap.ui.core.Item({key:"Contains",text:"Contains"}),2);l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].insertItem(new sap.ui.core.Item({key:"NotContains",text:"Not Contains"}),3)}}l.getModel().setProperty("/reset",true)},onFilterValuesSelectionChange:function(e,t){var r=t;var l=r._GenericFilterDialog;if(l.getModel().getProperty("/reset")){var o=l.getModel().getProperty("/items");var a=l.getModel().getProperty("/values");var s=l.getModel().getProperty("/currValues");var i=l.getModel().getProperty("/selectedColumn");var n=l.getModel().getProperty("/selectedItem");var g=l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[1].getItems()[0];var d=false;s.forEach((e,t)=>{if(g.isIndexSelected(t)){e.Selected=true;a[i].filter(t=>t.Value===e.Value).forEach(e=>e.Selected=true)}else{d=true;e.Selected=false;a[i].filter(t=>t.Value===e.Value).forEach(e=>e.Selected=false)}});if(d){l.getModel().setProperty("/selectVLF",true);l.getModel().setProperty("/panelVLFVisible",true);l.getModel().setProperty("/panelUDFVisible",false);o.forEach(e=>{if(e.ColumnName===i){e.filterType="VLF";e.isFiltered=true}})}else{l.getModel().setProperty("/btnRemoveFilterEnable",false)}var u=o.filter(e=>e.ColumnName===i)[0].filterType;var m=l.getContent()[0].getMasterPages()[0].getContent()[0].getItems().filter(e=>e.getTitle()===n)[0];if(u==="VLF"){if(d){m.setIcon("sap-icon://filter");l.getModel().setProperty("/btnRemoveFilterEnable",true)}else{m.setIcon("sap-icon://text-align-justified");l.getModel().setProperty("/btnRemoveFilterEnable",false)}}}},onSearchFilterValue:function(e,t){var r=t;var l=r._GenericFilterDialog;var o=l.getModel().getProperty("/values");var a=[];var s=l.getModel().getProperty("/search");var i=l.getModel().getProperty("/selectedColumn");var n=l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[1].getItems()[0];var g="";var d=false;var u=-1,m=-1;if(typeof e==="string"){g=e}else{g=e.getParameter("query")}if(g){var f=g.split("*");o[i].forEach(e=>{var t=true;f.forEach(r=>{if(!t){return}if(r.trim()===""){return}if(e.Value.toLocaleLowerCase().indexOf(r.toLocaleLowerCase().trim())>=0){t=true}else{t=false}});if(t){a.push(e)}})}else{a=o[i]}s[i]=g;l.getModel().setProperty("/search",s);l.getModel().setProperty("/currValues",a);l.getModel().setProperty("/rowCount",a.length);l.getModel().setProperty("/reset",false);var p=jQuery.extend(true,[],a);n.clearSelection();p.forEach((e,t)=>{if(e.Selected){if(u===-1)u=t;m=t}if(!e.Selected||t===p.length-1){if(u!==-1){if(!d){n.setSelectionInterval(u,m)}else{n.addSelectionInterval(u,m)}d=true;l.getModel().setProperty("/reset",false)}u=-1;m=-1}});l.getModel().setProperty("/reset",true)},onCustomColFilterChange:function(e,t){var r=t;var l=r._GenericFilterDialog;if(!(e.getSource().getSelectedKey()===undefined||e.getSource().getSelectedKey()==="")){if(e.getSource().getSelectedKey()==="BT"){l.getModel().setProperty("/panelUDFToVisible",true)}else{l.getModel().setProperty("/panelUDFToVisible",false)}}var o=l.getModel().getProperty("/items");var a=l.getModel().getProperty("/selectedColumn");var s=l.getModel().getProperty("/selectedItem");var i=l.getModel().getProperty("/custom");var n=l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[0].getSelectedKey();var g=o.filter(e=>e.ColumnName===a)[0].DataType;var d=l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[1].getValue();var u=l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[1].getItems()[1].getValue();if(g==="DATETIME"){d=l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[2].getValue();u=l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[1].getItems()[2].getValue()}i[a].Operator=n;i[a].ValFr=d;i[a].ValTo=u;l.getModel().setProperty("/custom",i);if(d!==""){l.getModel().setProperty("/selectUDF",true);l.getModel().setProperty("/panelVLFVisible",false);l.getModel().setProperty("/panelUDFVisible",true);o.forEach(e=>{if(e.ColumnName===a){e.filterType="UDF";e.isFiltered=true}})}var m=o.filter(e=>e.ColumnName===a)[0].filterType;var f=l.getContent()[0].getMasterPages()[0].getContent()[0].getItems().filter(e=>e.getTitle()===s)[0];if(m==="UDF"){if(d!==""){f.setIcon("sap-icon://filter");l.getModel().setProperty("/btnRemoveFilterEnable",true)}else{f.setIcon("sap-icon://text-align-justified");l.getModel().setProperty("/btnRemoveFilterEnable",false)}}},onSetUseColFilter:function(e,t){var r=t;var l=r._GenericFilterDialog;var o=l.getModel().getProperty("/items");var a=l.getModel().getProperty("/values");var s=l.getModel().getProperty("/selectedColumn");var i=l.getModel().getProperty("/selectedItem");o.forEach(t=>{if(t.ColumnName===s&&e.getParameter("selected")){t.filterType=e.getSource().data("FilterType")}});var n=l.getContent()[0].getMasterPages()[0].getContent()[0].getItems().filter(e=>e.getTitle()===i)[0];if(e.getSource().data("FilterType")==="UDF"){l.getModel().setProperty("/panelVLFVisible",false);l.getModel().setProperty("/panelUDFVisible",true);if(l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[2].getItems()[0].getItems()[1].getValue()!==""&&e.getParameter("selected")){l.getModel().setProperty("/btnRemoveFilterEnable",true);n.setIcon("sap-icon://filter")}else{l.getModel().setProperty("/btnRemoveFilterEnable",false);n.setIcon("sap-icon://text-align-justified")}}else{l.getModel().setProperty("/panelVLFVisible",true);l.getModel().setProperty("/panelUDFVisible",false);if(a[s].filter(e=>e.Selected===false).length>0&&e.getParameter("selected")){l.getModel().setProperty("/btnRemoveFilterEnable",true);n.setIcon("sap-icon://filter")}else{l.getModel().setProperty("/btnRemoveFilterEnable",false);n.setIcon("sap-icon://text-align-justified")}}},onRemoveColFilter:function(e,t){var r=t;var l=r._GenericFilterDialog;var o=l.getModel().getProperty("/items");var a=l.getModel().getProperty("/values");var s=l.getModel().getProperty("/custom");var i=l.getModel().getProperty("/selectedColumn");var n=l.getModel().getProperty("/selectedItem");o.forEach(e=>{if(e.ColumnName===i){e.isFiltered=false}});s[i].ValFr="";s[i].ValTo="";l.getModel().setProperty("/custom",s);l.getModel().setProperty("/customColFilterFrVal","");l.getModel().setProperty("/customColFilterToVal","");a[i].forEach(e=>e.Selected=true);var g=false;var d=-1,u=-1;var m=l.getContent()[0].getDetailPages()[0].getContent()[0].getItems()[1].getItems()[0];l.getModel().setProperty("/reset",false);m.clearSelection();a[i].forEach((e,t)=>{if(e.Selected){if(d===-1)d=t;u=t}if(!e.Selected||t===a[i].length-1){if(d!==-1){if(!g){m.setSelectionInterval(d,u)}else{m.addSelectionInterval(d,u)}g=true;l.getModel().setProperty("/reset",false)}d=-1;u=-1}});l.getModel().setProperty("/reset",true);l.getModel().setProperty("/values",a);l.getModel().setProperty("/currValues",a[i]);l.getContent()[0].getMasterPages()[0].getContent()[0].getItems().forEach(e=>{if(e.getTitle()===n){e.setIcon("sap-icon://text-align-justified")}});l.getModel().setProperty("/btnRemoveFilterEnable",false)},getConnector(e){var t;switch(e){case"EQ":t=sap.ui.model.FilterOperator.EQ;break;case"NE":t=sap.ui.model.FilterOperator.NE;break;case"GT":t=sap.ui.model.FilterOperator.GT;break;case"GE":t=sap.ui.model.FilterOperator.GE;break;case"LT":t=sap.ui.model.FilterOperator.LT;break;case"LE":t=sap.ui.model.FilterOperator.LE;break;case"BT":t=sap.ui.model.FilterOperator.BT;break;case"Contains":t=sap.ui.model.FilterOperator.Contains;break;case"NotContains":t=sap.ui.model.FilterOperator.NotContains;break;case"StartsWith":t=sap.ui.model.FilterOperator.StartsWith;break;case"NotStartsWith":t=sap.ui.model.FilterOperator.NotStartsWith;break;case"EndsWith":t=sap.ui.model.FilterOperator.EndsWith;break;case"NotEndsWith":t=sap.ui.model.FilterOperator.NotEndsWith;break;default:t=sap.ui.model.FilterOperator.Contains;break}return t},applyColFilters:function(r,l){var o=l;var a=o._GenericFilterDialog;if(o._colFilters[r]!==undefined){if(a){var s=o._colFilters[r].items;var i=o._colFilters[r].values;var n=o._colFilters[r].custom;var g=[];var d=null;var u=o.byId(r).getColumns();s.forEach(e=>{var r=u.filter(t=>t.getAggregation("label").getProperty("text")===e.ColumnLabel)[0];var l=[];var o=null;if(e.filterType==="VLF"&&i[e.ColumnName].filter(e=>e.Selected===false).length>0){i[e.ColumnName].forEach(r=>{if(r.Selected){if(r.Value==="(blank)"){l.push(new t(e.ColumnName,this.getConnector("EQ"),""));l.push(new t(e.ColumnName,this.getConnector("EQ"),null));l.push(new t(e.ColumnName,this.getConnector("EQ"),undefined))}else if(e.DataType==="BOOLEAN"){if(r.Value==="Yes"){l.push(new t(e.ColumnName,this.getConnector("EQ"),true))}else{l.push(new t(e.ColumnName,this.getConnector("EQ"),false))}}else{l.push(new t(e.ColumnName,this.getConnector("EQ"),r.Value))}}});o=new t(l,false);g.push(new t(o));r.setProperty("filtered",true);e.isFiltered=true}else if(e.filterType==="UDF"&&n[e.ColumnName].ValFr!==""){if(n[e.ColumnName].ValTo!==""){g.push(new t(e.ColumnName,this.getConnector("BT"),n[e.ColumnName].ValFr,n[e.ColumnName].ValTo))}else{g.push(new t(e.ColumnName,this.getConnector(n[e.ColumnName].Operator),n[e.ColumnName].ValFr))}r.setProperty("filtered",true);e.isFiltered=true}else{r.setProperty("filtered",false);e.isFiltered=false}});if(g.length>0){d=new t(g,true)}else{d=""}o.byId(r).getBinding("rows").filter(d,"Application");if(r==="headerTab"){if(o.byId(r).getBinding("rows").aIndices.length===0){o.getView().getModel("ui").setProperty("/activeComp","");o.getView().getModel("ui").setProperty("/activeCompDisplay","");o.getView().getModel("counts").setProperty("/header",0);o.getView().getModel("counts").setProperty("/detail",0);o.byId("detailTab").setModel(new e({rows:[]}))}else{var m=o.byId(r).getModel().getData().rows.filter((e,t)=>t===o.byId(r).getBinding("rows").aIndices[0])[0].COSTCOMPCD;if(o.getView().getModel("ui").getProperty("/activeComp")!==m){o.byId(r).getModel().getData().rows.forEach(e=>{if(e.COSTCOMPCD===m){e.ACTIVE="X"}else{e.ACTIVE=""}});o.setActiveRowHighlight(r);o.getView().getModel("ui").setProperty("/activeComp",m);o.getView().getModel("ui").setProperty("/activeCompDisplay",m);o.getDetailData(false)}o.getView().getModel("counts").setProperty("/header",o.byId(r).getBinding("rows").aIndices.length)}}else if(r==="detailTab"){if(o.byId(r).getBinding("rows").aIndices.length===0){o.getView().getModel("counts").setProperty("/detail",0)}else{o.getView().getModel("counts").setProperty("/detail",o.byId(r).getBinding("rows").aIndices.length);o.setActiveRowHighlight(r)}}}}},removeColFilters:function(e,t){var r=t;var l=r._GenericFilterDialog;if(r._colFilters[e]!==undefined){if(l){var o=r._colFilters[e].items;var a=r._colFilters[e].values;var s="";o.forEach(e=>{a[e.ColumnName].forEach(e=>e.Selected=true);e.isFiltered=false});r.byId(e).getBinding("rows").filter(s,"Application");l.getContent()[0].getMasterPages()[0].getContent()[0].getItems().forEach(e=>e.setIcon("sap-icon://text-align-justified"));r.byId(e).getColumns().forEach(e=>{e.setProperty("filtered",false)})}}},isFiltered:function(e,t,r,l){var o=l;var a=undefined;var s=false;if(o._GenericFilterDialog){if(o._colFilters[e]!==undefined){a=o._colFilters[e].items;if(r==="ALL"){if(a.filter(e=>e.isFiltered===true).length>0){s=true}}else{if(a.filter(e=>e.ColumnName===t&&e.isFiltered===true).length>0){s=true}}}}return s},isSorted:function(e,t,r){var l=r;var o=false;var a=l.byId(e).getColumns().filter(e=>e.getProperty("name")===t)[0];if(a.getProperty("sorted")){o=true}console.log(a);return o}}});